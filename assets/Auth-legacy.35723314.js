!function(){function e(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,a){var i=t.apply(n,r);function s(t){e(i,o,a,s,l,"next",t)}function l(t){e(i,o,a,s,l,"throw",t)}s(void 0)}))}}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){s=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a=document.createElement("style");a.innerHTML=".auth[data-v-f2731860]{width:100vw;height:100vh;display:flex;align-items:center;justify-content:center}.auth .bg[data-v-f2731860]{width:100%;height:200px;display:flex;align-items:center;justify-content:center;background-size:cover;background-color:#1781b5;background-image:url(/assets/bgi.03bfdf2b.png);background-repeat:no-repeat;background-position:center}.auth .bg .main[data-v-f2731860]{width:350px;border-top:5px #409eff solid;border-radius:5px 5px 0 0}.auth .bg .main .name[data-v-f2731860]{font-size:24px;font-weight:600}\n",document.head.appendChild(a),System.register(["./useComposables-legacy.b3cf5d97.js","./index-legacy.0726abb6.js","./useRequestor-legacy.7584c3c3.js","./vendor-legacy.5dd500bd.js"],(function(e){"use strict";var r,a,i,s,l,u,c,d;return{setters:[function(e){r=e.u},function(e){a=e.u,i=e.n},function(e){s=e.u,l=e.a},function(e){u=e.r,c=e.e,d=e.o}],execute:function(){var f,p=function(e){switch(o(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};f=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===o(e)?Object.keys(e).map((function(r){var o=encodeURIComponent(p(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return o+encodeURIComponent(p(e))})).join(t):o+encodeURIComponent(p(e[r]))})).filter(Boolean).join(t):r?encodeURIComponent(p(r))+n+encodeURIComponent(p(e)):""};var m=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function v(e,t){return s.request({url:m.AuthLogin,data:f({username:e,password:t}),method:"POST"})}m.AuthToken="/token",m.AuthLogin="//10.0.0.212/api/login",m.HandleAction="/password";var g={};g.setup=function(e,o){var i=function(){var e=a(),o=u("admin"),i=u(""),p=n(r(!1),2),g=p[0],h=p[1],b=u({old_password:"",new_password:""}),y=u({old_password:[{required:!0,message:"必填项",trigger:"blur"}],new_password:[{required:!0,message:"必填项",trigger:"blur"},{min:8,message:"新密码不得少于 8 位",trigger:"blur"}]}),w=u(null),x=n(r(!1),2),k=x[0],_=x[1],S=n(r(!1),2),C=S[0],R=S[1],A=function(){var n=t(regeneratorRuntime.mark((function n(){var r,a,u,d,f,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.value){n.next=2;break}return n.abrupt("return",l(-1,"请先输入帐号"));case 2:if(i.value){n.next=4;break}return n.abrupt("return",l(-1,"请先输入密码"));case 4:return n.prev=4,h(!0),n.next=8,v(o.value,i.value);case 8:r=n.sent,a=r.status_code,u=r.status_info,d=r.data,l(a,u)&&(f=d.token,p=d.first_time_login,localStorage.setItem("Token",f),p?(_(!0),setTimeout((function(){c.exports.Notification({type:"info",title:"提示",message:"当前帐号首次登录该系统，需修改密码后再进行操作 ~",duration:5e3})}))):(e.push("/analysis"),setInterval(t(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.request({url:m.AuthToken,method:"POST"});case 2:t=e.sent,n=t.data,localStorage.setItem("Token",n.token);case 5:case"end":return e.stop()}}),e)}))),108e5))),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(4),l("error",JSON.stringify(n.t0));case 19:return n.prev=19,h(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,16,19,22]])})));return function(){return n.apply(this,arguments)}}(),L=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(!0),e.next=4,null===(t=w.value)||void 0===t?void 0:t.validate();case 4:return e.next=6,a=b.value,s.request({url:m.HandleAction,data:f(a),method:"POST"});case 6:n=e.sent,r=n.status_code,o=n.status_info,l(r,o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l("error",JSON.stringify(e.t0));case 15:return e.prev=15,R(!1),_(!1),e.finish(15);case 19:case"end":return e.stop()}var a}),e,null,[[0,12,15,19]])})));return function(){return e.apply(this,arguments)}}(),j=function(e){if("Enter"===e.key)return o.value?i.value?void A():l(-1,"请先输入密码"):l(-1,"请先输入帐号")};return document.addEventListener("keyup",j),d((function(){return document.removeEventListener("keyup",j)})),{loading:g,username:o,password:i,handleLogin:A,model:b,rules:y,formRef:w,visible:k,setVisible:_,confirmLoading:C,handleConfirm:L}}();return{loading:i.loading,username:i.username,password:i.password,handleLogin:i.handleLogin,rules:i.rules,model:i.model,formRef:i.formRef,visible:i.visible,setVisible:i.setVisible,confirmLoading:i.confirmLoading,handleConfirm:i.handleConfirm}};var h={},b=i(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"auth"},[n("div",{staticClass:"bg"},[n("el-card",{staticClass:"main",attrs:{hoverable:""}},[n("div",{staticClass:"text-align-center",attrs:{slot:"header"},slot:"header"},[n("el-row",[n("svg",{attrs:{t:"1631531428029",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1241",width:"40"}},[n("path",{attrs:{d:"M694.710857 429.129143a201.581714 201.581714 0 1 0 0.146286 403.163428 201.581714 201.581714 0 0 0-0.146286-403.163428z m0 352.694857a114.761143 114.761143 0 1 1 0.073143-229.302857 114.761143 114.761143 0 0 1-0.073143 229.302857z m0-174.738286a62.464 62.464 0 0 0 0 124.928c34.742857 0 62.683429-28.086857 62.683429-62.464S729.453714 607.085714 694.710857 607.085714z",fill:"#409EFF","p-id":"1242"}}),n("path",{attrs:{d:"M840.484571 796.086857c-37.814857 33.060571-89.088 53.540571-145.773714 53.540572s-108.251429-20.48-145.846857-53.540572l-34.304 75.337143-0.438857 1.170286a25.380571 25.380571 0 0 0 4.681143 25.161143c9.728 11.995429 30.354286 19.821714 52.809143 19.821714h246.125714c19.017143 0 43.154286-6.582857 53.906286-21.065143a23.771429 23.771429 0 0 0 3.072-24.941714l-34.230858-75.483429zM329.142857 768H226.889143c-98.230857 0-150.893714-46.372571-165.888-145.846857L55.003429 246.125714c0-62.537143 29.842286-136.411429 171.885714-136.411428h550.765714c139.776 0 155.940571 73.654857 155.940572 129.024l2.048 84.992a36.571429 36.571429 0 0 1-35.693715 37.449143 37.376 37.376 0 0 1-37.449143-35.693715l-2.048-85.869714c0-32.109714 0-56.758857-82.797714-56.758857h-550.765714c-98.742857 0-98.742857 37.741714-98.742857 62.683428l5.632 370.614858c10.166857 65.755429 39.424 78.701714 93.110857 78.701714H329.142857a36.571429 36.571429 0 0 1 0 73.142857z",fill:"#4D5573","p-id":"1243"}})])]),n("el-row",[n("span",{staticClass:"name"},[e._v("安维科技 AI 盒子")])])],1),n("el-input",{attrs:{clearable:"",placeholder:"用户帐号","prefix-icon":"el-icon-user"},model:{value:e.username,callback:function(t){e.username="string"==typeof t?t.trim():t},expression:"username"}}),n("el-input",{staticStyle:{"margin-top":"16px"},attrs:{clearable:"",autofocus:"","show-password":"",placeholder:"登录密码","prefix-icon":"el-icon-lock"},model:{value:e.password,callback:function(t){e.password="string"==typeof t?t.trim():t},expression:"password"}}),n("el-divider",{attrs:{"content-position":"right"}},[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.setVisible(!0)}}},[e._v("修改密码")])],1),n("el-button",{staticClass:"w-100",attrs:{type:"primary",icon:"el-icon-d-arrow-right",loading:e.loading},on:{click:e.handleLogin}},[e._v("登 录")])],1)],1),n("el-dialog",{attrs:{width:"20%",visible:e.visible},on:{"update:visible":function(t){e.visible=t}},scopedSlots:e._u([{key:"title",fn:function(){return[n("i",{staticClass:"m-r-8 el-icon-edit"}),n("span",[e._v("修改密码")])]},proxy:!0},{key:"footer",fn:function(){return[n("el-button",{attrs:{type:"warning",icon:"el-icon-close"},on:{click:function(t){return e.setVisible(!1)}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-check",loading:e.confirmLoading},on:{click:e.handleConfirm}},[e._v("确 定")])]},proxy:!0}])},[n("el-form",{ref:"formRef",attrs:{model:e.model,rules:e.rules}},[n("el-form-item",{attrs:{label:"旧密码",prop:"old_password"}},[n("el-input",{attrs:{clearable:"","show-password":""},model:{value:e.model.old_password,callback:function(t){e.$set(e.model,"old_password",t)},expression:"model.old_password"}})],1),n("el-form-item",{attrs:{label:"新密码",prop:"new_password"}},[n("el-input",{attrs:{clearable:"","show-password":""},model:{value:e.model.new_password,callback:function(t){e.$set(e.model,"new_password",t)},expression:"model.new_password"}})],1)],1)],1)],1)}),[],!1,y,"f2731860",null,null);function y(e){for(var t in h)this[t]=h[t]}e("default",function(){return b.exports}())}}}))}();
